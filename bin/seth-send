#!/bin/sh
### seth-send -- publish a transaction to the blockchain
### Usage: seth send [--value=<value>] <account> [<contract>]
### Publish a transaction to call <contract> from <account>.
### The calldata of the transaction is read from standard input.
###
### If <contract> is not given, create a new contract instead.
### If `--value' is given, transfer <value> wei along with the transaction.
###
### To specify the gas limit or gas price, use the `-g' or `-P' options.

exec seth rpc eth_sendTransaction -- \
  -n {} `seth tx-params`             \
    -s "${1?}"   -i from             \
    ${2+ -s "$2" -i to}              \
    -s "`cat`"   -i data             \
    -iappend

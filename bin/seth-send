#!/usr/bin/env bash
### seth-send -- publish a transaction to the blockchain
### Usage: seth send [-a <account>] [-m <money>] <receiver> [<calldata>]
### Publish a transaction to call <receiver> from <account>.
###
### If no <calldata> is given, read it from standard input instead.
### If no <calldata> is given at all, just transfer <money> to <receiver>.

data=`seth data ${2+"$2"}` || exit
exec seth rpc eth_sendTransaction -- -n {} ${1:+-s "$1" -i to} \
  -s "$data" -i data `seth rpc-send-params` -iappend

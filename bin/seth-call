#!/bin/sh
### seth-call -- call a contract without updating the blockchain
### Usage: seth call [-b <block>] [--value=<value>] <account> <contract>
### Call <contract> from <account> immediately on your local machine.
### The calldata of the transaction is read from standard input.
###
### If `-b' is given, perform the call against the state as of <block>.
### If `--value' is given, simulate sending <value> wei with the call.
###
### To specify the gas limit or price, use the `-g' or `-P' options.

exec seth rpc eth_call -- \
  -n {} `seth tx-params`  \
    -s "$1"    -i from    \
    -s "$2"    -i to      \
    -s "`cat`" -i data    \
    -iappend              \
  -s "${ETH_BLOCK?}" -iappend

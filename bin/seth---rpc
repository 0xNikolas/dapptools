#!/usr/bin/env bash
set -e -o pipefail; shopt -s lastpipe
[[ $DEBUG ]] && set -x
: ${ETH_RPC_URL:=${ETH_RPC_HOST-localhost}:${ETH_RPC_PORT-8545}}
seth --get-signature $1 | read result_type param_types
seth --print-request $1 "$param_types" "${@:2}" |
seth --send-request $ETH_RPC_URL |
{ [[ $RAW ]] && cat || seth --parse-response $result_type; }
